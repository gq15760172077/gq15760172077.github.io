(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{510:function(s,a,n){"use strict";n.r(a);var t=n(4),e=Object(t.a)({},(function(){var s=this,a=s.$createElement,n=s._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h2",{attrs:{id:"写在前面"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#写在前面"}},[s._v("#")]),s._v(" 写在前面")]),s._v(" "),n("p",[s._v("   Pandas 常用 api 总结！//转载自https://www.jianshu.com/p/c51a21503c0c，侵删\n  pandas 作为 python 在数据科学领域关键包之一，熟练其 API 是必备的."),n("br"),s._v("\n我们使用如下缩写："),n("br"),s._v("\n  df：任意的 Pandas DataFrame 对象"),n("br"),s._v("\n  s：任意的 Pandas Series 对象"),n("br"),s._v("\n同时我们需要做如下的引入："),n("br"),s._v("\n  import pandas as pd"),n("br"),s._v("\n  import numpy as np")]),s._v(" "),n("h2",{attrs:{id:"series对象"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#series对象"}},[s._v("#")]),s._v(" Series对象")]),s._v(" "),n("p",[s._v("  Series是Pandas中最基本的对象，基于NumPy的数组对象来的，和NumPy的数组不同的是，Series能为数据自定义标签，就是索引（index），然后通过索引来访问数组中的数据。"),n("br"),s._v(" "),n("strong",[s._v("1、创建Series对象并省略索引")]),s._v("\n  sel = Series([1,2,3,4])")]),s._v(" "),n("p",[n("strong",[s._v("2、自己创建索引")]),s._v("\nsel = Series(data = [1,2,3,4],index=['a','b','c','d'])"),n("br"),s._v("\nsel = Series(data = [1,2,3,4],index=list('abcd'))")]),s._v(" "),n("p",[n("strong",[s._v("3、获取索引")]),s._v("\nsel.index")]),s._v(" "),n("p",[n("strong",[s._v("4、获取value值")]),s._v("\nsel.values")]),s._v(" "),n("p",[n("strong",[s._v("5、获取索引和值,类型键值对（字典）")]),n("br"),s._v("\nlist(sel.iteritems())")]),s._v(" "),n("p",[n("strong",[s._v("6、将字典转为Series")]),n("br"),s._v("\nSeries(dict)")]),s._v(" "),n("p",[n("strong",[s._v("7、Series对象同时支持位置和索引两种方式获取数据")]),n("br"),s._v("\n\"索引小标：\",sel['c']"),n("br"),s._v('\n"位置小标：",sel[2]')]),s._v(" "),n("p",[n("strong",[s._v("8、获取不连续的数据")]),n("br"),s._v("\n\"位置小标：\",sel[['a','c']]"),n("br"),s._v('\n"索引小标：",sel[[1,3]]')]),s._v(" "),n("p",[n("strong",[s._v("9、可以使用切片获取数据")]),n("br"),s._v("\n'位置切片：','\\n',sel[1:3] 左闭右开"),n("br"),s._v("\n'索引切片：','\\n',sel['b':'d'] 左右都包含")]),s._v(" "),n("p",[n("strong",[s._v("10、重新赋值索引的值")]),s._v("\nreindex重新定义索引，会返回一个新的Series（调用reindex将会重新排序，缺失的值则用Nan填补）"),n("br"),s._v("\nsel.reindex(['d','a','c','d','e'])"),n("br"),s._v("\n并且随着缺失值nan的填值，value将会变成float类型，因为nan是float类型")]),s._v(" "),n("p",[n("strong",[s._v("11、Drop丢掉指定轴上的项（删除）")]),n("br"),s._v("\nsel4.drop([2,3]) 删除了索引是2,3的值")]),s._v(" "),n("p",[n("strong",[s._v("12、处理NaN空值，过滤缺失数据")]),n("br"),s._v("\ndropna()：将NaN数据过滤掉，只要包含NaN就都过滤掉"),n("br"),s._v("\nnotnull()：布尔类型bool，缺失的数据显示的是False"),n("br"),s._v("\nisnull()：布尔类型bool，缺失数据False"),n("br"),s._v(" "),n("strong",[s._v("13、Series 进行算数运算操作")])]),s._v(" "),n("div",{staticClass:"language-python line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-python"}},[n("code",[n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.")]),s._v("series1 "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" pd"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Series"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Londn'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'HongKong'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Humbai'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'lagos'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.")]),s._v("series2 "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" pd"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Series"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Londn'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Accra'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'lagos'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Delhi'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("print")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("series1 "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" series2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("print")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("series1 "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" series2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("print")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("series1 "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" series2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  \n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("p",[s._v("如果pandas在两个Series中找不到相同的index，对应位置就返回一个空值NaN")]),s._v(" "),n("p",[s._v("同样也支持Numpy的数组运算")]),s._v(" "),n("div",{staticClass:"language-python line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-python"}},[n("code",[s._v("sel "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" Series"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("data "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("index"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("list")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'abcd'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("print")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("sel"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("sel"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#输出大于3的值，布尔数组过滤")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("print")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("sel"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#给所有数据乘以2")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("print")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("np"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("square"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("sel"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#value的平方值")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("h2",{attrs:{id:"导入数据"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#导入数据"}},[s._v("#")]),s._v(" 导入数据")]),s._v(" "),n("p",[s._v("  pd.read_csv(filename)：从CSV文件导入数据"),n("br"),s._v("\n  pd.read_table(filename)：从限定分隔符的文本文件导入数据"),n("br"),s._v("\n  pd.read_excel(filename)：从Excel文件导入数据"),n("br"),s._v("\n  pd.read_sql(query, connection_object)：从SQL表/库导入数据"),n("br"),s._v("\n  pd.read_json(json_string)：从JSON格式的字符串导入数据"),n("br"),s._v("\n  pd.read_html(url)：解析URL、字符串或者HTML文件，抽取其中的tables表格"),n("br"),s._v("\n  pd.read_clipboard()：从你的粘贴板获取内容，并传给read_table()"),n("br"),s._v("\n  pd.DataFrame(dict)：从字典对象导入数据，Key是列名，Value是数据")]),s._v(" "),n("h2",{attrs:{id:"导出数据"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#导出数据"}},[s._v("#")]),s._v(" 导出数据")]),s._v(" "),n("p",[s._v("  df.to_csv(filename)：导出数据到CSV文件"),n("br"),s._v("\n  df.to_excel(filename)：导出数据到Excel文件"),n("br"),s._v("\n  df.to_sql(table_name, connection_object)：导出数据到SQL表"),n("br"),s._v("\n  df.to_json(filename)：以Json格式导出数据到文本文件")]),s._v(" "),n("h2",{attrs:{id:"创建测试对象"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#创建测试对象"}},[s._v("#")]),s._v(" 创建测试对象")]),s._v(" "),n("p",[s._v("  pd.DataFrame(np.random.rand(20,5))：创建20行5列的随机数组成的DataFrame对象"),n("br"),s._v("\n  pd.Series(my_list)：从可迭代对象my_list创建一个Series对象"),n("br"),s._v("\n  df.index = pd.date_range('1900/1/30', periods=df.shape[0])：增加一个日期索引")]),s._v(" "),n("h2",{attrs:{id:"查看、检查数据"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#查看、检查数据"}},[s._v("#")]),s._v(" 查看、检查数据")]),s._v(" "),n("p",[s._v("  df.head(n)：查看DataFrame对象的前n行"),n("br"),s._v("\n  df.tail(n)：查看DataFrame对象的最后n行"),n("br"),s._v("\n  df.shape[0],    df.shape[1]：分别查看行数和列数"),n("br"),s._v("\n  df.info()：查看索引、数据类型和内存信息"),n("br"),s._v("\n  df.describe()：查看数值型列的汇总统计"),n("br"),s._v("\n  s.value_counts(dropna=False)：查看Series对象的唯一值和计数"),n("br"),s._v("\n  s.count() ：非空值数量"),n("br"),s._v("\n  df.apply(pd.Series.value_counts)：查看DataFrame对象中每一列的唯一值和计数")]),s._v(" "),n("h2",{attrs:{id:"数据选取"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#数据选取"}},[s._v("#")]),s._v(" 数据选取")]),s._v(" "),n("p",[s._v("  df[col]：根据列名，并以Series的形式返回列")]),s._v(" "),n("p",[s._v("  df[[col1, col2]]：以DataFrame形式返回多列")]),s._v(" "),n("p",[s._v("  s.iloc[0]：按位置选取数据")]),s._v(" "),n("p",[s._v("  s.loc['index_one']：按索引选取数据")]),s._v(" "),n("p",[s._v("  df.iloc[0,:]：返回第一行")]),s._v(" "),n("p",[s._v("  df.iloc[0,0]：返回第一列的第一个元素")]),s._v(" "),n("h2",{attrs:{id:"数据清理"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#数据清理"}},[s._v("#")]),s._v(" 数据清理")]),s._v(" "),n("p",[s._v("  df.columns = ['a','b','c']：重命名列名\n  \n  pd.isnull()：检查DataFrame对象中的空值，并返回一个Boolean数组\n  \n  pd.notnull()：检查DataFrame对象中的非空值，并返回一个Boolean数组\n  \n  df.dropna()：删除所有包含空值的行\n  \n  df.dropna(axis=1)：删除所有包含空值的列\n  \n  df.dropna(axis=1,thresh=n)：删除所有小于n个非空值的行\n  \n  df.fillna(x)：用x替换DataFrame对象中所有的空值\n  \n  s.astype(float)：将Series中的数据类型更改为float类型\n  \n  s.replace(1,'one')：用‘one’代替所有等于1的值\n  \n  s.replace([1,3],['one','three'])：用'one'代替1，用'three'代替3\n  \n  df.rename(columns=lambda x: x + 1)：批量更改列名\n  \n  df.rename(columns={'old_name': 'new_ name'})：选择性更改列名\n  \n  df.set_index('column_one')：更改索引列\n  \n  df.rename(index=lambda x: x + 1)：批量重命名索引")]),s._v(" "),n("h2",{attrs:{id:"数据处理-filter、sort和groupby"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#数据处理-filter、sort和groupby"}},[s._v("#")]),s._v(" 数据处理：Filter、Sort和GroupBy")]),s._v(" "),n("p",[s._v("  df[df[col] > 0.5]：选择col列的值大于0.5的行\n  \n  df.sort_values(col1)：按照列col1排序数据，默认升序排列\n  \n  df.sort_values(col2, ascending=False)：按照列col1降序排列数据\n  \n  df.sort_values([col1,col2], ascending=[True,False])：先按列col1升序排列，后按col2降序排列数据\n  \n  df.groupby(col)：返回一个按列col进行分组的Groupby对象\n  \n  df.groupby([col1,col2])：返回一个按多列进行分组的Groupby对象\n  \n  df.groupby(col1)[col2]：返回按列col1进行分组后，列col2的均值\n  \n  df.pivot_table(index=col1, values=[col2,col3], aggfunc=max)：创建一个按列col1进行分组，并计算col2和col3的最大值的数据透视表\n  \n  df.groupby(col1).agg(np.mean)：返回按列col1分组的所有列的均值\n  \n  data.apply(np.mean)：对DataFrame中的每一列应用函数np.mean\n  \n  data.apply(np.max,axis=1)：对DataFrame中的每一行应用函数np.max\n  \n  df.get_dummies() ：one-hot编码\n  \n  s.map() , df.applymap()：映射")]),s._v(" "),n("h2",{attrs:{id:"数据合并"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#数据合并"}},[s._v("#")]),s._v(" 数据合并")]),s._v(" "),n("p",[s._v("  df1.append(df2)：将df2中的行添加到df1的尾部\n  \n  df.concat([df1, df2],axis=1)：将df2中的列添加到df1的尾部\n  \n  df1.join(df2,on=col1,how='inner')：对df1的列和df2的列执行SQL形式的join")]),s._v(" "),n("h2",{attrs:{id:"数据统计"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#数据统计"}},[s._v("#")]),s._v(" 数据统计")]),s._v(" "),n("p",[s._v("  df.describe()：查看数据值列的汇总统计\n  \n  df.mean()：返回所有列的均值\n  \n  df.corr()：返回列与列之间的相关系数\n  \n  df.count()：返回每一列中的非空值的个数\n  \n  df.max()：返回每一列的最大值\n  \n  df.min()：返回每一列的最小值\n  \n  df.median()：返回每一列的中位数\n  \n  df.std()：返回每一列的标准差")])])}),[],!1,null,null,null);a.default=e.exports}}]);